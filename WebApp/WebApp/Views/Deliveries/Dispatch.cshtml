@model WebApp.Models.Delivery.DeliveryViewModel


<script type="text/javascript">
        $(document).ready(function () {
            $('[data-toggle="tooltip"]').tooltip();

            var calendarEl = document.getElementById('calendar');
            let startTime = document.getElementById('startTime');
            let endTime = document.getElementById('endTime');
            let c = 0;

            var calendar = new FullCalendar.Calendar(calendarEl, {
                plugins: ['interaction', 'dayGrid', 'timeGrid'],
                selectable: true,
                droppable: true,
                editable: true,
                themeSystem: 'bootstrap',
                defaultView: 'timeGridWeek',
                header: {
                    left: 'prev,next today',
                    center: 'title',
                    right: 'timeGridWeek'
                },
                minTime: '06:00:00',
                maxTime: '18:00:00',
                slotDuration: '00:30:00',
                nowIndicator: true,
                theme: 'cosmo',
                eventOverlap: false,
                events: [
                    {
                        title: 'Dostava',
                        start: '2020-04-05 12:00:00',
                        end: '2020-04-05 12:30:00'
                    }
                ],
                eventDrop: function (info) {
                    startTime.innerHTML = info.event.start;
                    endTime.innerHTML = info.event.end;
                },
                select: function (info) {
                    if (c === 0) {
                        alert('selected ' + info.startStr + ' to ' + info.endStr);
                        this.addEvent(
                            {
                                title: 'Dostava',
                                start: info.startStr,
                                end: info.endStr,
                                editable: true,
                                eventOverlap: false,
                                durationEditable: false
                            }
                        );
                        this.selectable = false;
                        startTime.innerHTML = info.startStr;
                        endTime.innerHTML = info.endStr;
                        c++;
                    }
                },
            });
            calendar.render();
        });
</script>
<div class="dispatch-form-width login-form">
    <form asp-action="Edit">
        <div class="avatar"><i class="material-icons">local_shipping</i></div>
        <h4 class="modal-title">Odpošlji</h4>
        <div asp-validation-summary="ModelOnly" class="text-danger"></div>

        <div class="form-group">
            @*<input type="number" class="form-control" placeholder="Šifra pošiljke" required="required" >*@
            <p>@Html.DisplayFor(modelItem => modelItem.Code)</p>
        </div>
        <div class="form-group">
            @*<input asp-for="DeliveryPoint" type="text" class="form-control" placeholder="Dostavna točka" required="required">
            <span asp-validation-for="DeliveryPoint" class="text-danger"></span>*@
            <label for="exampleFormControlSelect1">Dostavne točke</label>
                <select class="form-control" id="exampleFormControlSelect1">
                    <option>1</option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option>5</option>
                </select>
        </div>
        <div class="form-group" id="startTime">
            <input asp-for="DispatchTime" name="start" type="hidden" class="form-control" required="required">

        </div>
        <div class="form-group" id="endTime">
            <input asp-for="DeliveryTime" name="end" type="hidden" class="form-control" required="required">
        </div>
        <div class="form-group">
            <span asp-validation-for="DispatchTime" class="text-danger"></span>
            <div id='calendar'></div>
        </div>
        <input type="submit" class="btn btn-primary btn-block btn-lg" value="Odpošlji">
    </form>
</div>

<div class="text-center">
    <a asp-action="Index">Nazaj na seznam</a>
</div>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}